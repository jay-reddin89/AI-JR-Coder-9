import{R as Zt,j as e,u as es,r as a,F as ts,a as Se}from"./vendor-BP38Z2MI.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))f(p);new MutationObserver(p=>{for(const m of p)if(m.type==="childList")for(const g of m.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&f(g)}).observe(document,{childList:!0,subtree:!0});function c(p){const m={};return p.integrity&&(m.integrity=p.integrity),p.referrerPolicy&&(m.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?m.credentials="include":p.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function f(p){if(p.ep)return;p.ep=!0;const m=c(p);fetch(p.href,m)}})();function s(...b){return b.filter(Boolean).join(" ")}function ss(b,r){const[c,f]=a.useState(b);return a.useEffect(()=>{const p=setTimeout(()=>f(b),r);return()=>clearTimeout(p)},[b,r]),c}function as({log:b}){const[r,c]=a.useState(!1);return e.jsxs("div",{className:"log-panel bg-[#e8e8e8] shadow-[inset_4px_4px_8px_#c5c5c5,inset_-4px_-4px_8px_#ffffff] rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-[#666] font-mono text-xs font-bold",children:["Build Logs (",b.length,")"]}),e.jsx("button",{onClick:()=>c(!r),className:"text-[#666] hover:text-[#333] text-xs font-bold transition-colors",title:r?"Collapse":"Expand",children:r?"â–¼":"â–¶"})]}),e.jsx("div",{className:`text-[#666] font-mono text-xs space-y-1 overflow-y-auto transition-all ${r?"max-h-96":"max-h-32"}`,children:b.map((f,p)=>e.jsx("div",{className:f.includes("âœ…")?"text-green-600":f.includes("âŒ")?"text-red-600":"",children:f},p))})]})}function ls({neu:b,neuBtn:r,neuBtnBlack:c,onClose:f,onExport:p,onImport:m,fileInputRef:g}){return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:f,children:e.jsxs("div",{className:s(b,"rounded-[24px] p-6 max-w-md w-full"),onClick:k=>k.stopPropagation(),children:[e.jsx("h3",{className:"font-black text-[#1a1a1a] text-xl mb-4",children:"ğŸ“¦ Export / Import"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:p,className:s("w-full",r,"rounded-xl py-3 font-bold text-[#1a1a1a]"),children:"ğŸ“¤ Export All Apps (JSON)"}),e.jsx("button",{onClick:()=>g.current?.click(),className:s("w-full",r,"rounded-xl py-3 font-bold text-[#1a1a1a]"),children:"ğŸ“¥ Import Apps (JSON)"}),e.jsx("input",{ref:g,type:"file",accept:".json",className:"hidden",onChange:m})]}),e.jsx("button",{onClick:f,className:s("w-full",c,"rounded-xl py-3 font-bold mt-4"),children:"Close"})]})})}function ns({neu:b,neuInset:r,neuBtn:c,neuBtnRed:f,neuBtnBlack:p,activeProvider:m,setActiveProvider:g,apiKeys:k,setApiKeys:j,favoriteModels:A,setFavoriteModels:_,models:D,pollinationsModels:l,setPollinationsModels:T,user:C,puter:U,onClose:E,signIn:Re,apps:I,appLayout:Ae,setAppLayout:ee}){const[Pe,u]=a.useState("AI"),[de,P]=a.useState(""),[xe,Le]=a.useState(!1),[te,De]=a.useState(k.Pollinations||""),[nt,pe]=a.useState(!1),[be,se]=a.useState(document.body.className.replace("theme-","")||"light"),[ae,Fe]=a.useState(""),[W,ze]=a.useState(!1),[B,K]=a.useState(!1),Me=[{id:"side-by-side",name:"Side by Side",icon:"â–¢â–¢â–¢"},{id:"stacked",name:"Stacked",icon:`â–­
â–­
â–­`},{id:"pyramid",name:"Pyramid",icon:`â–­
â–¢â–¢`}],H=["Puter","Pollinations","Google","Github","OpenRouter","Custom"],Ie=["light","dark","grey","multicoloured"],le=()=>{document.body.className=`theme-${be}`,localStorage.setItem("app-theme",be),E()},Oe=()=>{const i=localStorage.getItem("app-theme")||"light";se(i),document.body.className=`theme-${i}`,E()},ne=i=>{se(i),document.body.className=`theme-${i}`},me=Se.useCallback(async()=>{try{const i=await fetch("https://gen.pollinations.ai/text/models");if(!i.ok)throw new Error("Failed to fetch models");const w=(await i.json()).map(q=>({id:q.name,name:q.name,provider:"Pollinations",description:q.description||""})).filter(q=>!["gpt-4o-mini","gpt-4o","gpt-4"].includes(q.id));return T(w),w}catch{return null}},[]),Te=Se.useCallback(async(i,M)=>{if(j(w=>({...w,[i]:M})),P("Key saved!"),i==="Pollinations"&&M){pe(!0);const w=await me();P(w?`Key saved! Found ${w.length} models.`:"Key saved but failed to fetch models."),pe(!1)}},[me]),Ve=Se.useCallback(async()=>{if(!te){P("Please enter an API key first.");return}P("Testing...");const i=await me();P(i?`Valid key! Found ${i.length} models.`:"Invalid key or API error. Check your connection.")},[te,me]),ve=Se.useCallback(i=>{_(M=>{const w=new Set(M);return w.has(i)?w.delete(i):w.add(i),w})},[]),ie=Se.useCallback(i=>{P(`Model Details: ${i.name||i.id}
Provider: ${i.provider}
${i.description||"No description available."}`)},[]),oe=a.useMemo(()=>m==="Puter"?D.filter(i=>i.provider!=="Other"&&i.provider!=="Pollinations"):m==="Pollinations"?l:[],[D,l,m]),ue=a.useMemo(()=>oe.filter(i=>A.has(i.id)).filter(i=>i.id.toLowerCase().includes(ae.toLowerCase())),[oe,A,ae]);return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:E,children:e.jsxs("div",{className:s(b,"rounded-[24px] p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto"),onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"font-black text-[#1a1a1a] text-xl flex items-center gap-2",children:"âš™ï¸ Settings"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>u("AI"),className:s("px-4 py-2 rounded-xl text-sm font-bold transition-all",Pe==="AI"?r:c),children:"AI"}),e.jsx("button",{onClick:()=>u("UI"),className:s("px-4 py-2 rounded-xl text-sm font-bold transition-all",Pe==="UI"?r:c),children:"UI"})]})]}),Pe==="AI"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-[#666]",children:"Provider"}),e.jsx("select",{value:m,onChange:i=>g(i.target.value),className:s(r,"w-full rounded-xl p-3 outline-none font-bold text-inherit bg-transparent"),children:H.map(i=>e.jsx("option",{value:i,className:"bg-[var(--bg-secondary)] text-[var(--text-color)]",children:i},i))})]}),m==="Custom"&&e.jsx("div",{className:"space-y-4 pt-4 border-t border-[var(--border-color)]",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-[#666]",children:"Provider Name"}),e.jsx("input",{type:"text",placeholder:"e.g. Local LLM",value:k.customName||"",onChange:i=>j(M=>({...M,customName:i.target.value})),className:s(r,"w-full rounded-xl p-3 text-xs outline-none bg-transparent text-inherit")})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-[#666]",children:"Base URL"}),e.jsx("input",{type:"text",placeholder:"https://api.example.com/v1",value:k.customBaseUrl||"",onChange:i=>j(M=>({...M,customBaseUrl:i.target.value})),className:s(r,"w-full rounded-xl p-3 text-xs outline-none bg-transparent text-inherit")})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-[#666]",children:"API Key"}),e.jsx("input",{type:"password",placeholder:"sk-...",value:k.customKey||"",onChange:i=>j(M=>({...M,customKey:i.target.value})),className:s(r,"w-full rounded-xl p-3 text-xs outline-none bg-transparent text-inherit")})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-[#666]",children:"Custom Model ID"}),e.jsx("input",{type:"text",placeholder:"gpt-3.5-turbo",value:k.customModelId||"",onChange:i=>j(M=>({...M,customModelId:i.target.value})),className:s(r,"w-full rounded-xl p-3 text-xs outline-none bg-transparent text-inherit")})]}),e.jsx("button",{onClick:()=>P("Custom settings saved!"),className:s(p,"w-full rounded-xl py-2 font-bold text-sm mt-2"),children:"Save Custom Provider"})]})}),m==="Puter"&&e.jsx("div",{className:"space-y-4 pt-4 border-t border-[#d1d1d1]",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-bold text-[#666]",children:"ğŸ‘¤ Account"}),e.jsx("button",{onClick:()=>K(!B),className:"text-sm font-bold text-[#666] hover:text-[#1a1a1a] transition-colors",title:B?"Collapse":"Expand",children:B?"â–¼":"â–¶"})]}),B&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#666]",children:"Logged in as"}),e.jsx("p",{className:"font-bold text-[#1a1a1a]",children:C?.username||"Guest"})]}),C?e.jsx("button",{onClick:async()=>{U?.auth?.signOut&&(await U.auth.signOut(),window.location.reload())},className:s(f,"px-4 py-2 rounded-xl text-xs font-bold"),children:"Sign Out"}):e.jsx("button",{onClick:Re,className:s(c,"px-4 py-2 rounded-xl text-xs font-bold"),children:"Sign In"})]}),C&&I&&I.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-xs font-bold text-[#666]",children:["Saved Apps (",I.length,")"]}),e.jsx("div",{className:s(r,"rounded-xl p-3 max-h-32 overflow-y-auto"),children:e.jsxs("div",{className:"space-y-2",children:[I.slice(0,10).map(i=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"font-medium text-[#1a1a1a] truncate",children:i.appTitle||i.appName}),i.hostedUrl&&e.jsx("a",{href:i.hostedUrl,target:"_blank",rel:"noopener noreferrer",className:"text-[#0010D9] hover:underline ml-2",children:"View"})]},i._id)),I.length>10&&e.jsxs("p",{className:"text-[#888] text-xs text-center",children:["+ ",I.length-10," more apps"]})]})})]}),e.jsx("a",{href:"https://puter.com/tools/dev-center",target:"_blank",rel:"noopener noreferrer",className:s(c,"block w-full text-center py-3 rounded-xl font-bold text-sm"),children:"ğŸš€ Open Puter Dev Center"})]})]})}),m==="Pollinations"&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-[#d1d1d1]",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-[#666]",children:"Pollinations API Key"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("input",{type:xe?"text":"password",placeholder:"Enter API Key",value:te,onChange:i=>De(i.target.value),className:s(r,"flex-1 rounded-xl p-3 text-xs outline-none bg-transparent")})}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{className:s(c,"px-3 py-2 rounded-xl text-xs font-bold"),onClick:()=>Le(!xe),children:[xe?"Hide":"Show"," Key"]}),e.jsx("button",{className:s(c,"px-3 py-2 rounded-xl text-xs font-bold"),onClick:()=>Te("Pollinations",te),children:"Save Key"}),e.jsx("button",{className:s(c,"px-3 py-2 rounded-xl text-xs font-bold"),onClick:Ve,children:"Test Key"})]}),de&&e.jsx("p",{className:s("text-[10px] font-bold",de.includes("Valid")||de.includes("saved")?"text-green-600":"text-orange-500"),children:de})]}),nt&&e.jsx("p",{className:"text-xs text-[#666]",children:"Loading models..."}),k.Pollinations&&l.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-bold text-[#666]",children:["Available Models (",l.length,")"]}),e.jsx("div",{className:s(r,"rounded-xl p-3 max-h-40 overflow-y-auto"),children:e.jsxs("div",{className:"space-y-1",children:[l.slice(0,20).map(i=>e.jsxs("div",{className:"flex items-center justify-between text-xs py-1",children:[e.jsx("span",{className:"font-mono truncate",children:i.id}),e.jsx("button",{onClick:()=>ve(i.id),className:"text-lg ml-2",children:A.has(i.id)?"â­":"â˜†"})]},i.id)),l.length>20&&e.jsxs("p",{className:"text-[#888] text-xs text-center pt-2",children:["+ ",l.length-20," more"]})]})})]}),e.jsxs("p",{className:"text-xs text-[#888]",children:["Get your API key at"," ",e.jsx("a",{href:"https://enter.pollinations.ai",target:"_blank",rel:"noopener noreferrer",className:"text-[#0010D9] hover:underline",children:"enter.pollinations.ai"})]})]}),["Google","Github","OpenRouter","Custom"].includes(m)&&e.jsx("div",{className:"pt-4 border-t border-[#d1d1d1] text-center py-8",children:e.jsx("p",{className:"text-[#666] italic text-sm",children:"Integration coming soon..."})}),ue.length>0||A.size>0?e.jsxs("div",{className:"space-y-3 pt-4 border-t border-[#d1d1d1]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-bold text-[#666]",children:"ğŸ“Œ Saved Models"}),e.jsx("button",{onClick:()=>ze(!W),className:"text-sm font-bold text-[#666] hover:text-[#1a1a1a] transition-colors",title:W?"Collapse":"Expand",children:W?"â–¼":"â–¶"})]}),W&&e.jsx(e.Fragment,{children:ue.length>0?e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:ue.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-black/5",children:[e.jsx("span",{className:"text-xs font-mono truncate mr-2",children:i.id}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ve(i.id),className:"text-2xl p-2 hover:scale-110 transition-transform",title:"Toggle Favorite",children:"â­"}),e.jsx("button",{onClick:()=>ie(i),className:s(c,"px-3 py-1 rounded-lg text-[10px] font-bold"),children:"Details"})]})]},i.id))}):e.jsx("p",{className:"text-xs text-[#888] text-center py-4",children:"No saved models yet"})})]}):null,oe.length>0&&e.jsxs("div",{className:"space-y-3 pt-4 border-t border-[#d1d1d1]",children:[e.jsx("label",{className:"text-sm font-bold text-[#666]",children:"All Models"}),oe.length>10&&e.jsxs("div",{className:s(r,"rounded-xl p-2 flex items-center"),children:[e.jsx("span",{className:"pl-2 text-[#999]",children:"ğŸ”"}),e.jsx("input",{value:ae,onChange:i=>Fe(i.target.value),placeholder:"Search models...",className:"flex-1 p-2 bg-transparent text-xs text-[#1a1a1a] border-0 outline-none placeholder-[#999]"})]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-2",children:oe.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-black/5",children:[e.jsx("span",{className:"text-xs font-mono truncate mr-2",children:i.id}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ve(i.id),className:"text-2xl p-2 hover:scale-110 transition-transform",title:"Toggle Favorite",children:A.has(i.id)?"â­":"â˜†"}),e.jsx("button",{onClick:()=>ie(i),className:s(c,"px-3 py-1 rounded-lg text-[10px] font-bold"),children:"Details"})]})]},i.id))})]}),e.jsx("button",{onClick:E,className:s(p,"w-full rounded-xl py-3 font-bold mt-8"),children:"Close"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-[#666]",children:"Theme"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Ie.map(i=>e.jsx("button",{onClick:()=>ne(i),className:s("p-3 rounded-xl text-xs font-bold capitalize transition-all",be===i?r+" text-[#0010d9]":c+" text-[#1a1a1a] hover:scale-105"),children:i},i))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-[#666]",children:"App Layout"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:Me.map(i=>e.jsxs("button",{onClick:()=>{ee(i.id),localStorage.setItem("app-layout",i.id)},className:s("p-4 rounded-xl text-center transition-all flex flex-col items-center gap-2",Ae===i.id?r+" text-[#0010d9]":c+" text-[#1a1a1a] hover:scale-105"),children:[e.jsx("div",{className:"text-2xl font-mono leading-tight whitespace-pre",children:i.icon}),e.jsx("span",{className:"text-xs font-bold",children:i.name})]},i.id))})]}),e.jsxs("div",{className:"flex gap-4 mt-8",children:[e.jsx("button",{onClick:le,className:s(p,"flex-1 rounded-xl py-3 font-bold"),children:"Save"}),e.jsx("button",{onClick:Oe,className:s(c,"flex-1 rounded-xl py-3 font-bold"),children:"Cancel"})]})]})]})})}function is({neu:b,neuInset:r,neuBtnRed:c,neuBtnBlack:f,shareLink:p,onClose:m,onCopy:g}){return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:m,children:e.jsxs("div",{className:s(b,"rounded-[24px] p-6 max-w-lg w-full"),onClick:k=>k.stopPropagation(),children:[e.jsx("h3",{className:"font-black text-[#1a1a1a] text-xl mb-4",children:"ğŸ”— Share App"}),e.jsx("div",{className:s(r,"rounded-xl p-3 mb-4"),children:e.jsx("input",{value:p,readOnly:!0,className:"w-full bg-transparent text-xs font-mono text-[#1a1a1a] outline-none"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:g,className:s("flex-1",c,"rounded-xl py-3 font-bold"),children:"ğŸ“‹ Copy Link"}),e.jsx("button",{onClick:m,className:s("flex-1",f,"rounded-xl py-3 font-bold"),children:"Close"})]})]})})}function os({neu:b,neuInset:r,neuBtnBlack:c,appVersions:f,onClose:p,onRestore:m}){return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:p,children:e.jsxs("div",{className:s(b,"rounded-[24px] p-6 max-w-md w-full max-h-[80vh] overflow-hidden"),onClick:g=>g.stopPropagation(),children:[e.jsx("h3",{className:"font-black text-[#1a1a1a] text-xl mb-4",children:"ğŸ“š Version History"}),e.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:f.length===0?e.jsx("p",{className:"text-[#666] text-center py-4",children:"No versions saved yet"}):f.map(g=>e.jsxs("div",{className:s(r,"rounded-xl p-3 flex justify-between items-center"),children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-[#1a1a1a]",children:["Version ",g.version]}),e.jsx("div",{className:"text-[#666] text-xs",children:new Date(g.createdAt).toLocaleString()})]}),e.jsx("button",{onClick:()=>m(g),className:s(c,"rounded-full px-3 py-1 text-sm font-bold text-[#1a1a1a]"),children:"Restore"})]},g._id))}),e.jsx("button",{onClick:p,className:s("w-full",c,"rounded-xl py-3 font-bold mt-4"),children:"Close"})]})})}function rs({neu:b,neuBtn:r,neuBtnBlack:c,templates:f,selectedTemplate:p,onSelect:m,onClose:g,neuInset:k}){return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:g,children:e.jsxs("div",{className:s(b,"rounded-[24px] p-6 max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col bg-[var(--bg-color)]"),onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"font-black text-inherit text-xl flex items-center gap-2",children:"ğŸ¨ App Templates"}),e.jsx("button",{onClick:g,className:s(r,"w-8 h-8 rounded-full flex items-center justify-center text-inherit"),children:"Ã—"})]}),e.jsx("div",{className:"overflow-y-auto pr-2 custom-scrollbar",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(j=>e.jsxs("button",{onClick:()=>m(j),className:s("p-4 rounded-2xl text-left transition-all flex flex-col gap-3 group bg-[var(--bg-secondary)]",p?.id===j.id?k:b),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-3xl",children:j.icon}),e.jsx("div",{className:s("text-[10px] font-black px-2 py-1 rounded-full uppercase tracking-wider",p?.id===j.id?"bg-[#0010d9] text-white":"bg-black/5 text-[#666]"),children:p?.id===j.id?"Selected":"Template"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-inherit text-sm mb-1 group-hover:text-[#0010d9] transition-colors",children:j.name}),e.jsx("div",{className:"text-[var(--text-secondary)] text-xs line-clamp-2 leading-relaxed",children:j.prompt})]})]},j.id))})}),e.jsx("button",{onClick:g,className:s(c,"w-full rounded-xl py-3 font-bold mt-6"),children:"Close"})]})})}function cs({neu:b,neuBtn:r,neuBtnBlack:c,neuInset:f,onClose:p,onCreate:m}){const[g,k]=a.useState(""),j=()=>{g.trim()&&(m(g.trim()),p())};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:p,children:e.jsxs("div",{className:s(b,"rounded-[24px] p-6 max-w-sm w-full bg-[var(--bg-secondary)]"),onClick:A=>A.stopPropagation(),children:[e.jsx("h3",{className:"font-black text-inherit text-lg mb-4",children:"Create New File"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-[#666] text-xs block mb-2",children:"File Name"}),e.jsx("div",{className:s(f,"rounded-xl p-1"),children:e.jsx("input",{type:"text",value:g,onChange:A=>k(A.target.value),placeholder:"e.g., styles.css, script.js",className:"w-full p-2 bg-transparent text-sm text-inherit border-0 outline-none placeholder-[#999]",autoFocus:!0,onKeyDown:A=>A.key==="Enter"&&j()})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:p,className:s(r,"flex-1 rounded-xl py-2.5 font-bold text-sm text-inherit"),children:"Cancel"}),e.jsx("button",{onClick:j,disabled:!g.trim(),className:s(c,"flex-1 rounded-xl py-2.5 font-bold text-sm disabled:opacity-50"),children:"Create"})]})]})]})})}function ge({isCollapsed:b,onToggle:r,direction:c="left"}){const f=b?c==="left"?"â†’":"â†":c==="left"?"â†":"â†’";return e.jsx("button",{onClick:r,className:"collapse-btn w-6 h-6 rounded-md bg-[#e8e8e8] shadow-[2px_2px_4px_#c5c5c5,-2px_-2px_4px_#ffffff] hover:bg-[#dc2626] hover:text-white flex items-center justify-center text-xs font-bold transition-all",title:b?"Expand panel":"Collapse panel",children:f})}function ds({puter:b,slim:r,onFetch:c,loading:f,isPulsing:p}){const[m,g]=a.useState(null),k=a.useCallback(async()=>{if(b?.auth?.getMonthlyUsage)try{const T=await b.auth.getMonthlyUsage();g(T),c&&c(T)}catch{}},[b,c]);if(a.useEffect(()=>{k();const T=setInterval(k,3e4);return()=>clearInterval(T)},[k]),!m?.allowanceInfo)return null;const{monthUsageAllowance:j,remaining:A}=m.allowanceInfo,_=j-A,D=Math.min(100,Math.max(0,_/j*100)),l=(100-D).toFixed(1);return r?e.jsx("div",{className:"flex-1 max-w-[400px] mx-4 select-none",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-[10px] font-mono text-[#666] whitespace-nowrap",children:[(_/1e6).toFixed(1),"M"]}),e.jsxs("div",{className:s("flex-1 relative h-2 bg-[#e8e8e8] rounded-full shadow-[inset_1px_1px_2px_#c5c5c5,inset_-1px_-1px_2px_#ffffff] overflow-hidden",p&&"usage-bar-pulse"),children:[e.jsx("div",{style:{width:`${D}%`,transition:"width 1s ease-in-out"},className:"h-full bg-[#0010d9] relative z-10"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 pointer-events-none",children:e.jsxs("span",{className:"text-[8px] font-mono font-bold text-[#444] drop-shadow-sm",children:[l,"%"]})})]}),e.jsxs("div",{className:"text-[10px] font-mono text-[#666] whitespace-nowrap",children:[(j/1e6).toFixed(1),"M"]})]})}):e.jsxs("div",{className:"select-none w-[90%]",children:[e.jsx("div",{className:"flex items-center justify-center gap-2 mb-3"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm font-mono text-[#666] whitespace-nowrap text-left min-w-[80px]",children:[e.jsxs("div",{className:"font-bold text-base leading-[15px]",children:[(_/1e6).toFixed(2),"M"]}),e.jsx("div",{className:"opacity-70 text-xs",children:"Used"})]}),e.jsxs("div",{className:s("flex-1 relative h-5 bg-[#e8e8e8] rounded-full shadow-[inset_2px_2px_4px_#c5c5c5,inset_-2px_-2px_4px_#ffffff] overflow-hidden",p&&"usage-bar-pulse"),children:[e.jsx("div",{style:{width:`${D}%`,transition:"width 1s ease-in-out"},className:"h-full bg-[#0010d9] relative z-10"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 pointer-events-none",children:e.jsxs("span",{className:"text-base font-mono font-bold text-[#1a1a1a] drop-shadow-sm",children:[l,"% Remaining"]})})]}),e.jsxs("div",{className:"text-sm font-mono text-[#666] whitespace-nowrap text-right min-w-[80px]",children:[e.jsxs("div",{className:"font-bold text-base leading-[15px]",children:[(j/1e6).toFixed(2),"M"]}),e.jsx("div",{className:"opacity-70 text-xs",children:"Total"})]})]})]})}function xs(){const{useLiveQuery:b,database:r}=es("puter-apps-v6"),{docs:c}=b("type",{key:"app",descending:!0}),{docs:f}=b("type",{key:"version",descending:!0}),[p,m]=a.useState(""),[g,k]=a.useState(""),[j,A]=a.useState(""),[_,D]=a.useState(!1),[l,T]=a.useState(null),[C,U]=a.useState(""),[E,Re]=a.useState([]),[I,Ae]=a.useState("gpt-4o-mini"),[ee,Pe]=a.useState("All"),[u,de]=a.useState(null),[P,xe]=a.useState(null),[Le,te]=a.useState([]),[De,nt]=a.useState(!1),[pe,be]=a.useState(""),[se,ae]=a.useState(null),[Fe,W]=a.useState(!1),[ze,B]=a.useState(!1),[K,Me]=a.useState(new Set),[H,Ie]=a.useState(!1),[le,Oe]=a.useState("date"),[ne,me]=a.useState(!1),[Te,Ve]=a.useState(!1),[ve,ie]=a.useState(!1),[oe,ue]=a.useState(!1),[i,M]=a.useState(!1),[w,q]=a.useState("Puter"),[je,it]=a.useState({}),[F,ot]=a.useState(new Set),[We,St]=a.useState([]),[Ke,At]=a.useState(""),[Je,Pt]=a.useState("build"),[Ge,rt]=a.useState(!1),[Be,He]=a.useState(!1),[$,ct]=a.useState(!1),[z,dt]=a.useState(!1),[Q,xt]=a.useState(!1),[Ee,Lt]=a.useState(()=>{const t=localStorage.getItem("leftPanelWidth");return t?parseFloat(t):25}),[Mt,It]=a.useState(()=>{const t=localStorage.getItem("codePanelWidth");return t?parseFloat(t):42}),[X,pt]=a.useState(null),[y,Tt]=a.useState(()=>localStorage.getItem("app-layout")||"side-by-side"),[Et,qe]=a.useState(!1),[ps,mt]=a.useState(""),[O,Qe]=a.useState([{name:"index.html",content:""}]),[J,Xe]=a.useState("index.html"),[_t,Ye]=a.useState(!1),[ms,us]=a.useState(!0),Ut=a.useRef(null),Ze=a.useRef(null),ut=a.useRef(null),ht=a.useRef(null),S="neu-box",L="neu-inset",N="neu-btn",Y="neu-btn-red",G="neu-btn-black",$t=a.useCallback(async()=>{if(u?.auth?.getMonthlyUsage){rt(!0),He(!1),Ye(!0);try{await u.auth.getMonthlyUsage(),He(!0),setTimeout(()=>{He(!1),Ye(!1)},2e3)}catch{Ye(!1)}rt(!1)}},[u]),ft=a.useCallback((t,n)=>{n.preventDefault(),n.stopPropagation(),pt(t)},[]);a.useEffect(()=>{localStorage.setItem("activeProvider",w)},[w]),a.useEffect(()=>{localStorage.setItem("favoriteModels",JSON.stringify([...F]))},[F]),a.useEffect(()=>{localStorage.setItem("apiKeys",JSON.stringify(je))},[je]),a.useEffect(()=>{localStorage.setItem("model",I)},[I]),a.useEffect(()=>{const t=localStorage.getItem("activeProvider");t&&q(t);const n=localStorage.getItem("favoriteModels");if(n)try{ot(new Set(JSON.parse(n)))}catch{}const o=localStorage.getItem("apiKeys");if(o)try{it(JSON.parse(o))}catch{}const x=localStorage.getItem("model");x&&Ae(x)},[]),a.useEffect(()=>{const t=O.find(n=>n.name===J);t&&U(t.content)},[J,O]);const Ne=De||C||l?.code,et=a.useRef({leftPanelCollapsed:$,leftPanelWidth:Ee});a.useEffect(()=>{et.current={leftPanelCollapsed:$,leftPanelWidth:Ee}},[$,Ee]);const gt=a.useCallback(t=>{if(!X||!Ze.current)return;const n=Ze.current.getBoundingClientRect(),x=(t.clientX-n.left)/n.width*100;if(X==="left"){const v=Math.max(10,Math.min(40,x));Lt(v),localStorage.setItem("leftPanelWidth",v)}else if(X==="right"){const v=et.current.leftPanelCollapsed?0:et.current.leftPanelWidth,h=Math.max(10,Math.min(80,x-v));It(h),localStorage.setItem("codePanelWidth",h)}},[X]),bt=a.useCallback(()=>{pt(null)},[]);a.useEffect(()=>{ut.current=gt,ht.current=bt},[gt,bt]),a.useEffect(()=>{const t=o=>ut.current?.(o),n=o=>ht.current?.(o);if(X){window.addEventListener("mousemove",t),window.addEventListener("mouseup",n),document.body.style.cursor="col-resize",document.body.style.userSelect="none";const o=document.createElement("div");o.id="resizing-overlay",o.style.position="fixed",o.style.inset="0",o.style.zIndex="9999",o.style.cursor="col-resize",document.body.appendChild(o)}return()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n),document.body.style.cursor="",document.body.style.userSelect="";const o=document.getElementById("resizing-overlay");o&&o.remove()}},[X]);const Rt=a.useMemo(()=>{const t=O.find(n=>n.name===J);return t?t.content:""},[O,J]),tt=a.useCallback(t=>{Qe(n=>n.map(o=>o.name===J?{...o,content:t}:o))},[J]),Dt=a.useCallback(()=>{const t=document.querySelector('iframe[title="App Preview"]');if(t){const n=t.src;t.src="about:blank",setTimeout(()=>{t.src=n,t.srcdoc=C||l?.code||""},10)}},[C,l]),Ft=a.useCallback(t=>{if(!(O.length<=1)&&(Qe(n=>n.filter(o=>o.name!==t)),J===t)){const n=O.filter(o=>o.name!==t);Xe(n[0]?.name||"index.html")}},[O,J]),zt=a.useMemo(()=>[{id:"todo",name:"Todo App",icon:"âœ…",prompt:"A beautiful todo app with categories, priorities, due dates, dark/light mode toggle, and local storage persistence"},{id:"calculator",name:"Calculator",icon:"ğŸ”¢",prompt:"A scientific calculator with history, memory functions, keyboard support, and a sleek modern UI"},{id:"notes",name:"Notes App",icon:"ğŸ“",prompt:"A notes app with markdown support, folders, search, tags, and auto-save functionality"},{id:"timer",name:"Pomodoro Timer",icon:"â±ï¸",prompt:"A pomodoro timer with customizable work/break intervals, statistics, sounds, and notifications"},{id:"weather",name:"Weather Dashboard",icon:"ğŸŒ¤ï¸",prompt:"A weather dashboard that shows current conditions, 5-day forecast, with beautiful animations and location search"},{id:"kanban",name:"Kanban Board",icon:"ğŸ“‹",prompt:"A kanban board with drag-and-drop cards, multiple columns, labels, and local storage"},{id:"password",name:"Password Generator",icon:"ğŸ”",prompt:"A password generator with strength meter, customizable options, copy to clipboard, and password history"},{id:"quiz",name:"Quiz Game",icon:"ğŸ¯",prompt:"An interactive quiz game with multiple categories, scoring, timer, and leaderboard"},{id:"expense",name:"Expense Tracker",icon:"ğŸ’°",prompt:"An expense tracker with categories, charts, monthly budgets, and export functionality"},{id:"drawing",name:"Drawing App",icon:"ğŸ¨",prompt:"A drawing canvas with brush sizes, colors, shapes, layers, undo/redo, and save as image"},{id:"music",name:"Music Player",icon:"ğŸµ",prompt:"A music player UI with playlist, progress bar, volume control, shuffle, and visualizer"},{id:"chat",name:"Chat Interface",icon:"ğŸ’¬",prompt:"A chat interface with message bubbles, typing indicators, timestamps, and emoji picker"},{id:"image-describer",name:"Image Describer",icon:"ğŸ–¼ï¸",prompt:"An app where users can upload or paste an image URL, and it uses AI to describe the content in detail."},{id:"rss-reader",name:"RSS Feed Reader",icon:"ğŸ“°",prompt:"A modern RSS feed reader with article preview, categorization, and the ability to add custom feed URLs."},{id:"ai-chat",name:"AI Chat App",icon:"ğŸ¤–",prompt:"A sophisticated AI chat interface with markdown rendering, code highlighting, and conversation history."},{id:"tts-app",name:"TTS App",icon:"ğŸ—£ï¸",prompt:"A Text-to-Speech application with multiple voice options, speed control, and the ability to download audio."},{id:"unit-converter",name:"Unit Converter",icon:"ğŸ”„",prompt:"A comprehensive unit converter for length, weight, temperature, and more with a clean, easy-to-use UI."},{id:"code-beautifier",name:"Code Beautifier",icon:"âœ¨",prompt:"A tool to format and beautify code for various languages like HTML, CSS, JS, and Python."}],[]),d=a.useCallback(t=>{te(n=>[...n.slice(-14),`${new Date().toLocaleTimeString()}: ${t}`])},[]),vt=a.useCallback(async t=>{await r.put({...t,views:(t.views||0)+1})},[r]),_e=a.useCallback(async(t,n)=>{n?.stopPropagation(),await r.put({...t,favorite:!t.favorite}),l?._id===t._id&&T({...t,favorite:!t.favorite})},[r,l]),we=a.useCallback(async(t,n)=>{n?.stopPropagation();try{if(d(`Deleting ${t.appName||t.subdomain}...`),t.appName)try{await u.apps.delete(t.appName)}catch{}if(t.subdomain)try{await u.hosting.delete(t.subdomain)}catch{}const o=f.filter(x=>x.appId===t._id);for(const x of o)await r.del(x._id);await r.del(t._id),l?._id===t._id&&(T(null),U("")),d("âœ… Deleted")}catch(o){d(`âŒ Error: ${o.message}`)}},[u,f,r,l,d]),ye=a.useCallback(async(t,n)=>{if(n?.stopPropagation(),await vt(t),t.appName&&u)try{await u.apps.launch(t.appName),d(`Launched: ${t.appName}`)}catch{window.open(t.hostedUrl,"_blank")}else window.open(t.hostedUrl,"_blank")},[u,vt,d]);a.useMemo(()=>l?e.jsx("div",{className:"p-3 border-t border-[var(--border-color)] bg-[var(--bg-secondary)]",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"font-bold text-inherit text-xs flex items-center gap-1 truncate",children:[e.jsx("span",{className:"text-[#dc2626]",children:"ğŸ“±"}),l.appTitle||l.appName,l.favorite&&e.jsx("span",{children:"â­"})]}),e.jsxs("div",{className:"text-[var(--text-secondary)] text-[10px] flex items-center gap-2 mt-0.5",children:[e.jsxs("span",{children:["v",l.version||1]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["ğŸ‘ï¸ ",l.views||0]}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"truncate",children:l.model})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:t=>_e(l,t),className:s(N,"rounded-lg w-7 h-7 flex items-center justify-center text-sm text-inherit"),children:l.favorite?"â­":"â˜†"}),e.jsx("button",{onClick:t=>ye(l,t),className:s(G,"rounded-lg px-2 py-1 font-bold text-xs"),children:"Launch"}),e.jsx("button",{onClick:t=>we(l,t),className:s(N,"rounded-lg w-7 h-7 flex items-center justify-center text-sm text-[#dc2626]"),children:"ğŸ—‘ï¸"})]})]})}):null,[l,_e,ye,we]);const st=ss(pe,300);a.useMemo(()=>["All",...new Set(E.map(t=>t.provider))].sort(),[E]);const Ue=a.useMemo(()=>{let t;w==="Pollinations"?t=We:w==="Puter"?t=ee==="All"?E.filter(x=>x.provider!=="Pollinations"):E.filter(x=>x.provider===ee&&x.provider!=="Pollinations"):t=ee==="All"?E:E.filter(x=>x.provider===ee);const n=t.filter(x=>F.has(x.id)),o=t.filter(x=>!F.has(x.id));return[...n,...o]},[E,We,ee,w,F]),jt=a.useMemo(()=>c?c.filter(t=>{if(ne&&!t.favorite)return!1;if(st){const n=st.toLowerCase();return t.appName?.toLowerCase().includes(n)||t.appTitle?.toLowerCase().includes(n)||t.prompt?.toLowerCase().includes(n)}return!0}).sort((t,n)=>le==="date"?(n.createdAt||0)-(t.createdAt||0):le==="name"?(t.appTitle||t.appName||"").localeCompare(n.appTitle||n.appName||""):le==="views"?(n.views||0)-(t.views||0):0):[],[c,ne,st,le]),he=a.useMemo(()=>({totalApps:c.length,totalVersions:f.filter(t=>l&&t.appId===l._id).length,favorites:c.filter(t=>t.favorite).length,totalViews:c.reduce((t,n)=>t+(n.views||0),0),modelsUsed:new Set(c.map(t=>t.model)).size,avgCodeSize:c.length?Math.round(c.reduce((t,n)=>t+(n.code?.length||0),0)/c.length):0}),[c,f,l]);a.useEffect(()=>{const t=document.createElement("script");t.src="https://js.puter.com/v2/",t.onload=async()=>{if(de(window.puter),d("SDK ready"),window.puter.auth.isSignedIn()){const n=await window.puter.auth.getUser();xe(n),d(`Welcome ${n.username}`)}},document.body.appendChild(t),fetch("https://api.puter.com/puterai/chat/models/").then(n=>n.json()).then(n=>{const o=(Array.isArray(n)?n:n.models||[]).map(x=>{const v=typeof x=="string"?x:x.id;let h="Other";return/gpt|o1|o3|chatgpt/i.test(v)?h="OpenAI":/claude/i.test(v)?h="Anthropic":/gemini|gemma/i.test(v)?h="Google":/llama/i.test(v)?h="Meta":/mistral|mixtral/i.test(v)?h="Mistral":/deepseek/i.test(v)?h="DeepSeek":/grok/i.test(v)?h="xAI":/qwen/i.test(v)&&(h="Alibaba"),{id:v,provider:h}});Re(o)}).catch(()=>{})},[]);const at=a.useCallback(async()=>{if(!u)return;await u.auth.signIn({redirect_url:window.location.href});const t=await u.auth.getUser();xe(t),d(`Welcome ${t.username}`)},[u]),Ot=a.useCallback(async t=>{const n=t||p;if(!n.trim()||!u||!P)return;D(!0);const o=!!l;o||(T(null),U("")),te([]),W(!1);try{d(`ğŸ¤– Model: ${I}`),d(`ğŸ“¦ Provider: ${w}`),d(o?"â™»ï¸ Updating app with new instructions...":"ğŸ”„ Generating code...");let x=`You are an expert web developer. Create a COMPLETE single HTML file app.
RULES:
- Start with <!DOCTYPE html>
- ALL CSS in <style> tag, ALL JS in <script> tag
- Modern CSS: variables, flexbox/grid, animations, gradients
- Modern JS: ES6+, localStorage, event handling
- Responsive and polished UI
- NO external dependencies
- Return ONLY HTML code`,v=`Build: ${n}`;o&&(x+=`

You are updating an existing app. Here is the current code:
${l.code}

Apply the user's requested changes while keeping the existing functionality intact. Return the FULL updated HTML.`,v=`Update Request: ${n}`);let h="";if(w==="Puter"){d("â³ Waiting for AI response...");const R=await u.ai.chat([{role:"system",content:x},{role:"user",content:v}],{model:I,stream:!0});let Z="",V=0;d("ğŸ“ Receiving code stream...");for await(const Ce of R)Ce?.text&&(Z+=Ce.text,V++,U(Z),tt(Z),V%10===0&&d(`ğŸ“¨ Received ${Z.length} chars...`));h=Z,d(`âœ“ Stream complete (${V} chunks)`)}else if(w==="Pollinations"){d("â³ Waiting for Pollinations API...");const R=je.Pollinations,Z=`https://gen.pollinations.ai/text/${encodeURIComponent(x+`

`+v)}?model=${I}&json=true`,V=await fetch(Z,{method:"GET",headers:{Accept:"*/*",Authorization:R?`Bearer ${R}`:""}});if(!V.ok){const fe=await V.text();throw new Error(`Pollinations API Error: ${V.status} ${fe}`)}d("ğŸ“¨ Response received, processing...");const Ce=await V.text();try{const fe=JSON.parse(Ce);h=fe?.choices?.[0]?.message?.content||fe?.content||String(fe)}catch{h=Ce}U(h),tt(h)}d("ğŸ” Cleaning up code..."),h=h.replace(/^```(?:html|js|javascript)?\n?/i,"").replace(/\n?```$/g,"").replace(/```html?\n?/gi,"").replace(/```\n?/g,"").trim();const Nt=h.search(/<!doctype\s+html>/i);if(Nt>0&&(h=h.slice(Nt)),!h.toLowerCase().includes("<!doctype html>"))throw new Error("Invalid HTML");d(`âœ“ Generated ${h.length} bytes of HTML`),d("ğŸ’¾ Updating files...");const re=l?.dir||`app_${Date.now()}`;l||(d(`ğŸ“ Creating directory: ${re}`),await u.fs.mkdir(re)),await u.fs.write(`${re}/index.html`,h),d(`âœ“ Wrote to ${re}/index.html`);let ce=l?.hostedUrl,$e=l?.subdomain;if(!l)d("ğŸŒ Creating hosted site..."),$e=g.trim().toLowerCase().replace(/[^a-z0-9-]/g,"")||u.randName(),ce=`https://${(await u.hosting.create($e,re)).subdomain}.puter.site`,d(`âœ“ Hosted at: ${ce}`);else{d("â™»ï¸ Redeploying site...");try{ce=`https://${(await u.hosting.create($e,re)).subdomain}.puter.site`,d("âœ“ Redeployment complete")}catch(R){d(`âš ï¸ Hosting update: ${R.message}`)}}const wt=o?l.appName:g.trim()||u.randName(),lt=o?l.appTitle:j.trim()||n.slice(0,50);if(!o){d("ğŸ“¦ Registering Puter app...");let R;try{R=await u.apps.create({name:wt,indexURL:ce,title:lt,description:n,maximizeOnStart:!0,dedupeName:!0}),d(`âœ“ App registered: ${R.name}`)}catch{d("âš ï¸ Name taken, using random...");const V=u.randName();R=await u.apps.create({name:V,indexURL:ce,title:lt,description:n,maximizeOnStart:!0}),d(`âœ“ App registered: ${R.name}`)}}d("ğŸ’¾ Saving to database...");const yt=(l?.version||0)+1,ke={...l||{},type:"app",prompt:o?`${l.prompt}

Update: ${n}`:n,code:h,subdomain:$e,hostedUrl:ce,appName:o?l.appName:wt,appTitle:lt,model:I,dir:re,updatedAt:Date.now(),version:yt};o||(ke.createdAt=Date.now(),ke.views=0,ke.favorite=!1,ke.tags=[]);const kt=await r.put(ke);await r.put({type:"version",appId:kt.id,code:h,version:yt,createdAt:Date.now(),note:o?`Update: ${n.slice(0,30)}...`:"Initial version"});const Yt=await r.get(kt.id);T(Yt),o||(k(""),A("")),m(""),ae(null),d("âœ… Complete! Opening app..."),window.open(ce,"_blank")}catch(x){d(`âŒ Error: ${x.message}`)}D(!1)},[u,P,I,p,g,j,r,d,l,w,je]),Vt=a.useCallback(async()=>{if(!(!l||!C||!u)){D(!0);try{d("Updating...");const t=`app_${Date.now()}`;await u.fs.mkdir(t),await u.fs.write(`${t}/index.html`,C);try{await u.hosting.delete(l.subdomain)}catch{}const o=`https://${(await u.hosting.create(l.subdomain,t)).subdomain}.puter.site`;if(l.appName)try{await u.apps.update(l.appName,{indexURL:o}),d(`Updated app: ${l.appName}`)}catch{}const x=(l.version||1)+1;await r.put({type:"version",appId:l._id,code:C,version:x,createdAt:Date.now(),note:`Version ${x}`}),await r.put({...l,code:C,dir:t,hostedUrl:o,updatedAt:Date.now(),version:x});const v=await r.get(l._id);T(v),U(""),d(`âœ… Updated to v${x}`),window.open(o,"_blank")}catch(t){d(`âŒ Error: ${t.message}`)}D(!1)}},[l,C,u,r]),Wt=a.useCallback(async()=>{if(K.size!==0){for(const t of K){const n=c.find(o=>o._id===t);n&&await we(n)}Me(new Set),Ie(!1)}},[K,c,we]),Kt=a.useCallback(async t=>{l&&(U(t.code),d(`Restored v${t.version}`),B(!1))},[l]),Jt=a.useCallback(()=>{const t=JSON.stringify(c,null,2),n=new Blob([t],{type:"application/json"}),o=URL.createObjectURL(n),x=document.createElement("a");x.href=o,x.download=`puter-apps-export-${Date.now()}.json`,x.click(),URL.revokeObjectURL(o),d("âœ… Exported apps"),ie(!1)},[c,d]),Gt=a.useCallback(t=>{const n=JSON.stringify(t,null,2),o=new Blob([n],{type:"application/json"}),x=URL.createObjectURL(o),v=document.createElement("a");v.href=x,v.download=`${t.appName||"app"}-export.json`,v.click(),URL.revokeObjectURL(x),d(`âœ… Exported ${t.appName}`)},[d]),Bt=a.useCallback(async t=>{const n=t.target.files[0];if(!n)return;const o=await n.text();try{const x=JSON.parse(o),v=Array.isArray(x)?x:[x];for(const h of v)delete h._id,h.imported=!0,h.createdAt=Date.now(),await r.put(h);d(`âœ… Imported ${v.length} app(s)`)}catch(x){d(`âŒ Import failed: ${x.message}`)}t.target.value="",ie(!1)},[r,d]),Ht=a.useCallback(t=>{const n=btoa(JSON.stringify({prompt:t.prompt,code:t.code,title:t.appTitle})),o=`${window.location.origin}?share=${n}`;At(o),ue(!0)},[]),qt=a.useCallback(()=>{navigator.clipboard.writeText(Ke),d("âœ… Link copied!")},[Ke,d]),Qt=a.useCallback(t=>{ae(t),m(t.prompt),A(t.name),W(!1)},[]),Xt=a.useMemo(()=>l?f.filter(t=>t.appId===l._id).sort((t,n)=>n.version-t.version):[],[f,l]);return a.useEffect(()=>{const t=localStorage.getItem("app-theme")||"light";document.body.className=`theme-${t}`},[]),e.jsxs("div",{className:"min-h-screen transition-colors duration-300 p-4 md:p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:s(S,"rounded-[20px] p-3 space-y-3"),children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[e.jsxs("h1",{className:"text-xl md:text-2xl font-black text-[#1a1a1a] flex items-center gap-2 shrink-0",children:[e.jsx("span",{className:"text-[#dc2626]",children:"ğŸ–¥ï¸"}),e.jsx("p",{className:"text-[#0010d9]",children:e.jsx("strong",{children:"JR AI"})}),e.jsx("p",{className:"text-[#0010d9]",children:e.jsx("strong",{children:"Coder"})})]}),e.jsxs("div",{className:"hidden md:flex flex-col border-l border-[#ccc] pl-4",children:[e.jsx("p",{className:"text-[#666] text-xs font-bold uppercase tracking-wider",children:w}),e.jsxs("p",{className:"text-[#888] text-[10px]",children:[E.length," models â€¢ ",c.length," apps â€¢"," ",he.totalViews," views"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>M(!0),className:s(N,"p-2 rounded-lg flex items-center justify-center transition-all hover:scale-105"),title:"Settings",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"settings-icon",children:[e.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),P&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Ve(!Te),className:s(N,"rounded-lg px-3 py-1.5 font-bold text-[#1a1a1a] text-xs transition-all hover:scale-105"),title:"Toggle Analytics",children:"ğŸ“Š"}),e.jsx("button",{onClick:()=>ie(!0),className:s(N,"rounded-lg px-3 py-1.5 font-bold text-[#1a1a1a] text-xs transition-all hover:scale-105"),title:"Export/Import Apps",children:"ğŸ“¦"})]}),P?e.jsxs("div",{className:"flex items-center gap-2 relative group",children:[e.jsx("div",{className:s(L,"rounded-lg px-3 py-1.5 cursor-default flex items-center gap-2"),children:e.jsxs("span",{className:"font-bold text-[#1a1a1a] text-xs",children:["ğŸ‘¤ ",P.username]})}),e.jsx("div",{className:"absolute right-0 top-full pt-2 opacity-0 group-hover:opacity-100 transition-all pointer-events-none group-hover:pointer-events-auto z-50 transform translate-y-2 group-hover:translate-y-0",children:e.jsx("div",{className:s(S,"rounded-xl p-1.5 min-w-[100px] border border-[#d1d1d1]"),children:e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsxs("button",{onClick:$t,disabled:Ge,className:s(N,"w-full rounded-lg px-3 py-2 font-bold text-xs transition-all text-left flex items-center gap-2",Be?"text-green-600":"text-[#1a1a1a]"),children:[Be?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-600",children:e.jsx("path",{d:"M20 6L9 17l-5-5"})}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:s(Ge?"animate-spin":""),children:[e.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.85.83 6.72 2.24"}),e.jsx("path",{d:"M21 3v9h-9"})]}),Be?"Updated!":"Refresh Usage"]}),e.jsxs("button",{onClick:()=>{u.auth.signOut(),window.location.reload()},className:s(N,"w-full rounded-lg px-3 py-2 font-bold text-red-600 text-xs transition-all text-left flex items-center gap-2"),children:[e.jsx("span",{children:"ğŸšª"})," Logout"]})]})})})]}):e.jsx("button",{onClick:at,disabled:!u,className:s(Y,"rounded-lg px-4 py-2 font-black text-xs disabled:opacity-50 transition-all hover:scale-105"),children:"Sign In"})]})]}),e.jsx(ds,{puter:u,slim:!1,onFetch:()=>{},loading:Ge,isPulsing:_t})]}),Te&&e.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-6 gap-4",children:[{label:"Total Apps",value:he.totalApps,icon:"ğŸ“±"},{label:"Favorites",value:he.favorites,icon:"â­"},{label:"Total Views",value:he.totalViews,icon:"ğŸ‘ï¸"},{label:"Models Used",value:he.modelsUsed,icon:"ğŸ¤–"},{label:"Avg Code Size",value:`${(he.avgCodeSize/1024).toFixed(1)}KB`,icon:"ğŸ“„"},{label:"Versions",value:f.length,icon:"ğŸ“š"}].map((t,n)=>e.jsxs("div",{className:s(L,"rounded-2xl p-4 text-center"),children:[e.jsx("div",{className:"text-2xl mb-1",children:t.icon}),e.jsx("div",{className:"font-black text-[#1a1a1a] text-xl",children:t.value}),e.jsx("div",{className:"text-[#666] text-xs",children:t.label})]},n))})]}),ve&&e.jsx(ls,{neu:S,neuBtn:N,neuBtnBlack:G,onClose:()=>ie(!1),onExport:Jt,onImport:Bt,fileInputRef:Ut}),oe&&e.jsx(is,{neu:S,neuInset:L,neuBtnRed:Y,neuBtnBlack:G,shareLink:Ke,onClose:()=>ue(!1),onCopy:qt}),ze&&l&&e.jsx(os,{neu:S,neuInset:L,neuBtnBlack:G,appVersions:Xt,onClose:()=>B(!1),onRestore:Kt}),Fe&&e.jsx(rs,{neu:S,neuBtn:N,neuBtnBlack:G,templates:zt,selectedTemplate:se,onSelect:Qt,onClose:()=>W(!1)}),i&&e.jsx(ns,{neu:S,neuInset:L,neuBtn:N,neuBtnRed:Y,neuBtnBlack:G,activeProvider:w,setActiveProvider:q,apiKeys:je,setApiKeys:it,favoriteModels:F,setFavoriteModels:ot,models:E,pollinationsModels:We,setPollinationsModels:St,user:P,puter:u,onClose:()=>M(!1),signIn:at,apps:c,appLayout:y,setAppLayout:Tt}),Et&&e.jsx(cs,{neu:S,neuBtn:N,neuBtnBlack:G,neuInset:L,onClose:()=>{qe(!1),mt("")},onCreate:t=>{if(O.some(o=>o.name.toLowerCase()===t.toLowerCase())){d(`File "${t}" already exists`);return}Qe(o=>[...o,{name:t,content:""}]),Xe(t),d(`Created new file: ${t}`),mt(""),qe(!1)}}),P?e.jsxs("div",{ref:Ze,className:"gap-0",style:{display:y==="pyramid"?"grid":"flex",gridTemplateColumns:y==="pyramid"?"1fr 1fr":void 0,gridTemplateRows:y==="pyramid"?"auto 1fr":void 0,flexDirection:y==="pyramid"?void 0:y==="stacked"?"column":"row",minHeight:"600px"},children:[e.jsxs("div",{className:s("transition-all duration-300",$&&"lg:min-w-[50px] lg:max-w-[50px]",y==="stacked"||y==="pyramid"?"w-full":"space-y-4",y==="pyramid"&&"overflow-y-auto"),style:{width:y==="stacked"||y==="pyramid"?"100%":$?"50px":`${Ee}%`,minWidth:$?"50px":y==="stacked"||y==="pyramid"?"100%":"200px",flexShrink:0,...y==="pyramid"&&{gridColumn:"1 / -1",maxHeight:"50vh"}},children:[e.jsx("div",{className:s(S,"rounded-[24px] p-2 flex gap-2 items-center"),children:$?e.jsxs("div",{className:"flex flex-col items-center gap-2 w-full py-2",children:[e.jsx(ge,{isCollapsed:$,onToggle:()=>ct(!$),direction:"left"}),e.jsx("span",{className:"text-xs font-bold text-[#666] writing-mode-vertical",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:"AI"})]}):e.jsxs(e.Fragment,{children:[[{id:"build",label:"Create",icon:"ğŸ”¨"},{id:"apps",label:"Apps",icon:"ğŸ“±"}].map(t=>e.jsxs("button",{onClick:()=>Pt(t.id),className:s("flex-1 py-2 rounded-xl font-bold text-xs transition-all",Je===t.id?s(L,"text-[#dc2626]"):s(N,"text-[#1a1a1a]")),children:[t.icon," ",t.label]},t.id)),e.jsx(ge,{isCollapsed:$,onToggle:()=>ct(!$),direction:"left"})]})}),!$&&e.jsxs(e.Fragment,{children:[Je==="build"&&e.jsxs("div",{className:s(S,"rounded-[24px] p-4"),children:[e.jsx("button",{onClick:()=>W(!0),className:s("w-full",N,"rounded-xl py-2 font-bold text-[#1a1a1a] text-xs mb-3 flex items-center justify-center gap-2"),children:"ğŸ¨ Choose Template"}),se&&e.jsxs("div",{className:s(L,"rounded-xl p-2 mb-3 flex items-center gap-2"),children:[e.jsx("span",{className:"text-lg",children:se.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-[#1a1a1a] text-xs",children:se.name}),e.jsx("button",{onClick:()=>{ae(null),m("")},className:"text-[#dc2626] text-[10px]",children:"Clear"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"font-black text-inherit text-[10px] uppercase tracking-wider mb-1 block",children:["Model (",w,")"]}),e.jsx("div",{className:s(L,"rounded-xl p-1"),children:e.jsxs("select",{value:I,onChange:t=>Ae(t.target.value),className:"w-full p-2 bg-transparent font-mono text-[10px] text-inherit border-0 outline-none",children:[Ue.filter(t=>F.has(t.id)).length>0&&e.jsx("optgroup",{label:"Favorites",className:"bg-[var(--bg-secondary)] text-inherit",children:Ue.filter(t=>F.has(t.id)).map(t=>e.jsx("option",{value:t.id,className:"bg-[var(--bg-secondary)] text-inherit",children:t.id},t.id))}),e.jsx("optgroup",{label:Ue.filter(t=>F.has(t.id)).length>0?"All Models":"Models",className:"bg-[var(--bg-secondary)] text-inherit",children:Ue.filter(t=>!F.has(t.id)).map(t=>e.jsx("option",{value:t.id,className:"bg-[var(--bg-secondary)] text-inherit",children:t.id},t.id))})]})})]}),Le.length>0&&e.jsx("div",{className:"mb-3",children:e.jsx(as,{log:Le})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"font-black text-[#dc2626] text-[10px] uppercase tracking-wider mb-1 block",children:l?`Modify "${l.appTitle||l.appName}"`:"App Description"}),e.jsx("div",{className:s(L,"rounded-xl p-1"),children:e.jsx("textarea",{value:p,onChange:t=>m(t.target.value),placeholder:l?"Describe changes to apply to the current app...":"Describe your app in detail...",className:"w-full h-20 p-2 bg-transparent font-mono text-xs text-inherit resize-none border-0 outline-none placeholder-[#999]"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-black text-inherit text-[10px] uppercase tracking-wider mb-1 block",children:"App Name"}),e.jsx("div",{className:s(L,"rounded-lg p-1"),children:e.jsx("input",{value:g,onChange:t=>k(t.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")),placeholder:"my-app",className:"w-full p-1.5 bg-transparent font-mono text-xs text-inherit border-0 outline-none placeholder-[#999]"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-black text-inherit text-[10px] uppercase tracking-wider mb-1 block",children:"Title"}),e.jsx("div",{className:s(L,"rounded-lg p-1"),children:e.jsx("input",{value:j,onChange:t=>A(t.target.value),placeholder:"My App",className:"w-full p-1.5 bg-transparent text-xs text-inherit border-0 outline-none placeholder-[#999]"})})]})]}),e.jsxs("div",{className:s(L,"rounded-xl p-2 flex items-center justify-between gap-2 mt-3"),children:[e.jsx("span",{className:"text-xs font-bold text-[#666] px-2 truncate",children:l?`Editing: ${l.appTitle||l.appName}`:"New App"}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[l&&e.jsx("button",{onClick:()=>{T(null),U(""),m("")},className:s(N,"rounded-lg px-3 py-1.5 font-bold text-xs"),children:"ğŸ†• New"}),e.jsx("button",{onClick:()=>Ot(),disabled:_||!p.trim(),className:s(Y,"rounded-lg px-4 py-1.5 font-bold text-xs disabled:opacity-50",_&&"generating-pulse"),children:_?"â³ Building...":l?"âœ¨ Update":"ğŸš€ Create & Deploy"})]})]})]}),Je==="apps"&&e.jsxs("div",{className:s(S,"rounded-[24px] overflow-hidden"),children:[e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:s(L,"rounded-xl p-1 flex items-center"),children:[e.jsx("span",{className:"pl-3 text-[#999]",children:"ğŸ”"}),e.jsx("input",{value:pe,onChange:t=>be(t.target.value),placeholder:"Search apps...",className:"flex-1 p-2 bg-transparent text-sm text-[#1a1a1a] border-0 outline-none placeholder-[#999]"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>me(!ne),className:s("px-3 py-1.5 rounded-full text-xs font-bold",ne?"bg-[#dc2626] text-white":s(N,"text-[#1a1a1a]")),children:"â­ Favorites"}),e.jsxs("select",{value:le,onChange:t=>Oe(t.target.value),className:s(N,"rounded-full px-3 py-1.5 text-xs font-bold text-[#1a1a1a] outline-none"),children:[e.jsx("option",{value:"date",children:"Recent"}),e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"views",children:"Views"})]}),e.jsx("button",{onClick:()=>Ie(!H),className:s("px-3 py-1.5 rounded-full text-xs font-bold",H?"bg-[#1a1a1a] text-white":s(N,"text-[#1a1a1a]")),children:"â˜‘ï¸ Select"})]}),H&&K.size>0&&e.jsxs("button",{onClick:Wt,className:s(Y,"rounded-xl w-full py-2 text-sm font-bold"),children:["ğŸ—‘ï¸ Delete ",K.size," Selected"]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:jt.length===0?e.jsx("div",{className:"p-6 text-[#888] text-center",children:pe||ne?"No matching apps":"No apps yet"}):jt.map(t=>e.jsx("div",{onClick:()=>{H||(T(t),U(""))},className:s("p-4 border-b border-[#d0d0d0] cursor-pointer transition-all",l?._id===t._id?L:"hover:bg-[#ddd]"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[H&&e.jsx("input",{type:"checkbox",checked:K.has(t._id),onChange:n=>{const o=new Set(K);n.target.checked?o.add(t._id):o.delete(t._id),Me(o)},className:"mt-1 w-5 h-5"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"font-black text-inherit flex items-center gap-2",children:[e.jsx("span",{className:"text-[#dc2626]",children:"ğŸ“±"}),t.appTitle||t.appName,t.favorite&&e.jsx("span",{children:"â­"})]}),e.jsxs("div",{className:"text-[var(--text-secondary)] text-xs flex items-center gap-2 mt-1",children:[e.jsxs("span",{children:["v",t.version||1]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["ğŸ‘ï¸ ",t.views||0]})]}),e.jsx("div",{className:"text-[var(--text-secondary)] text-xs mt-1 truncate",children:t.prompt})]}),!H&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{onClick:n=>_e(t,n),className:s(N,"rounded-full w-8 h-8 flex items-center justify-center text-sm"),children:t.favorite?"â­":"â˜†"}),e.jsx("button",{onClick:n=>ye(t,n),className:s(G,"rounded-full w-8 h-8 flex items-center justify-center text-xs"),children:"â–¶"})]})]})},t._id))})]})]})]}),!$&&!z&&y==="side-by-side"&&e.jsx("div",{onMouseDown:t=>ft("left",t),className:s("panel-resizer",X==="left"&&"active","hidden lg:flex")}),e.jsx("div",{className:s("space-y-4 transition-all duration-300",z&&"lg:min-w-[50px] lg:max-w-[50px]",y==="stacked"&&"w-full"),style:{width:y==="stacked"||y==="pyramid"?"100%":z?"50px":`${Mt}%`,minWidth:z?"50px":y==="stacked"?"100%":y==="pyramid"?"auto":"300px",flexShrink:0,...y==="pyramid"&&{gridColumn:"1",gridRow:"2"}},children:z?e.jsxs("div",{className:s(S,"rounded-[24px] p-2 flex flex-col items-center gap-2 h-full"),children:[e.jsx(ge,{isCollapsed:z,onToggle:()=>dt(!z),direction:"left"}),e.jsx("span",{className:"text-xs font-bold text-[#666]",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:"Code"})]}):e.jsxs("div",{className:s(S,"rounded-[24px] overflow-hidden h-full"),children:[e.jsxs("div",{className:s(S,"p-2 flex items-center justify-between"),children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ge,{isCollapsed:z,onToggle:()=>dt(!z),direction:"left"}),e.jsx("span",{className:"font-bold text-inherit text-sm px-2",children:"Code"}),e.jsxs("div",{className:"flex gap-1 items-center overflow-x-auto",children:[O.map(t=>e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>{Xe(t.name)},className:s("px-3 py-1.5 rounded-lg text-xs font-mono transition-all whitespace-nowrap pr-6",J===t.name?L:N,"text-inherit"),children:t.name}),O.length>1&&e.jsx("button",{onClick:n=>{n.stopPropagation(),Ft(t.name)},className:"absolute right-1 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity w-4 h-4 flex items-center justify-center rounded text-xs text-red-500 hover:bg-red-100",title:"Delete file",children:"Ã—"})]},t.name)),e.jsx("button",{onClick:()=>qe(!0),className:s(N,"rounded-lg w-7 h-7 flex items-center justify-center text-sm flex-shrink-0"),title:"Add file",children:"+"})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>{const t=C||l?.code||"";navigator.clipboard.writeText(t)},disabled:!Ne&&!C,className:s(N,"rounded-lg px-2 py-1 font-bold text-xs text-[#1a1a1a] disabled:opacity-50"),title:"Copy code",children:"ğŸ“‹ Copy"}),e.jsx("button",{disabled:!Ne&&!C,className:s(N,"rounded-lg px-2 py-1 font-bold text-xs text-[#1a1a1a] disabled:opacity-50"),title:"Format code",children:"âœ¨ Format"}),l&&C&&e.jsx("button",{onClick:Vt,disabled:_,className:s(Y,"rounded-lg px-3 py-1.5 font-bold text-xs disabled:opacity-50"),children:"Save & Deploy"})]})]}),e.jsx("div",{className:"h-[520px] bg-white",children:e.jsxs("div",{className:"relative h-full",children:[e.jsx(ts,{height:"100%",defaultLanguage:"html",theme:document.body.className.includes("theme-dark")?"vs-dark":"light",value:Rt||C||l?.code||"",onChange:t=>{U(t),tt(t)},options:{minimap:{enabled:!0,side:"right"},fontSize:12,wordWrap:"on",automaticLayout:!0,scrollBeyondLastLine:!1,padding:{top:16,bottom:16},lineNumbers:"on",scrollbar:{vertical:"auto",horizontal:"auto"}}}),e.jsxs("div",{className:"absolute bottom-2 right-2 text-[#666] text-xs z-10 bg-black/5 px-1 rounded",children:[(C||l?.code||"").length," chars"]})]})})]})}),!z&&!Q&&y==="side-by-side"&&e.jsx("div",{className:s("panel-resizer hidden lg:flex",X==="right"&&"active"),onMouseDown:t=>ft("right",t)}),e.jsx("div",{className:s("space-y-4 transition-all duration-300 flex-1",Q&&"lg:min-w-[50px] lg:max-w-[50px] lg:flex-none"),style:{minWidth:Q?"50px":"250px",...y==="pyramid"&&{gridColumn:"2",gridRow:"2"}},children:Q?e.jsxs("div",{className:s(S,"rounded-[24px] p-2 flex flex-col items-center gap-2 h-full"),children:[e.jsx(ge,{isCollapsed:Q,onToggle:()=>xt(!Q),direction:"right"}),e.jsx("span",{className:"text-xs font-bold text-[#666]",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:"Preview"})]}):e.jsxs("div",{className:s(S,"rounded-[24px] overflow-hidden h-full"),children:[e.jsxs("div",{className:s(S,"p-2 flex items-center justify-between flex-wrap gap-2"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{isCollapsed:Q,onToggle:()=>xt(!Q),direction:"right"}),e.jsx("span",{className:"font-bold text-inherit text-sm px-2",children:"Preview"})]}),e.jsxs("div",{className:"flex gap-1",children:[l&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>B(!0),className:s(N,"rounded-lg px-2 py-1 font-bold text-xs text-[#1a1a1a]"),title:"Versions",children:"ğŸ“š"}),e.jsx("button",{onClick:()=>Ht(l),className:s(N,"rounded-lg px-2 py-1 font-bold text-xs text-[#1a1a1a]"),title:"Share",children:"ğŸ”—"}),e.jsx("button",{onClick:()=>Gt(l),className:s(N,"rounded-lg px-2 py-1 font-bold text-xs text-[#1a1a1a]"),title:"Export",children:"ğŸ“¤"})]}),e.jsx("button",{onClick:t=>l&&ye(l,t),disabled:!Ne,className:s(N,"rounded-lg px-2 py-1 font-bold text-xs text-[#1a1a1a] disabled:opacity-50"),title:"Open in new tab",children:"ğŸ”— Open"}),e.jsx("button",{onClick:Dt,disabled:!Ne,className:s(Y,"rounded-lg px-3 py-1.5 font-bold text-xs disabled:opacity-50 flex items-center gap-1"),children:"â–¶ Run"})]})]}),e.jsx("div",{className:"h-[520px] bg-white",children:Ne?e.jsx("iframe",{srcDoc:C||l?.code,className:"w-full h-full border-0",sandbox:"allow-scripts allow-forms allow-modals allow-popups",title:"App Preview"}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[_?e.jsx("div",{className:s("w-16 h-16 mx-auto mb-4 rounded-full",L,"flex items-center justify-center"),children:e.jsx("span",{className:"text-2xl animate-spin","aria-label":"Loading",children:"âš™ï¸"})}):e.jsx("div",{className:s("w-16 h-16 mx-auto mb-4 rounded-full",S,"flex items-center justify-center"),children:e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"ğŸ“±"})}),e.jsx("div",{className:"font-black text-inherit text-sm",children:_?"BUILDING...":"LIVE PREVIEW"}),!_&&e.jsx("div",{className:"text-[#888] text-xs mt-2",children:"Build or select an app"})]})})}),l&&e.jsx("div",{className:"p-3 border-t border-[#d0d0d0]",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"font-bold text-[#1a1a1a] text-xs flex items-center gap-1 truncate",children:[e.jsx("span",{className:"text-[#dc2626]",children:"ğŸ“±"}),l.appTitle||l.appName,l.favorite&&e.jsx("span",{children:"â­"})]}),e.jsxs("div",{className:"text-[#666] text-[10px] flex items-center gap-2 mt-0.5",children:[e.jsxs("span",{children:["v",l.version||1]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["ğŸ‘ï¸ ",l.views||0]}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"truncate",children:l.model})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:t=>_e(l,t),className:s(N,"rounded-lg w-7 h-7 flex items-center justify-center text-sm"),children:l.favorite?"â­":"â˜†"}),e.jsx("button",{onClick:t=>ye(l,t),className:s(G,"rounded-lg px-2 py-1 font-bold text-xs"),children:"Launch"}),e.jsx("button",{onClick:t=>we(l,t),className:s(N,"rounded-lg w-7 h-7 flex items-center justify-center text-sm text-[#dc2626]"),children:"ğŸ—‘ï¸"})]})]})})]})})]}):e.jsxs("div",{className:s(S,"rounded-[32px] p-12 text-center"),children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-[#dc2626] flex items-center justify-center shadow-[inset_4px_4px_8px_#b91c1c,inset_-4px_-4px_8px_#ef4444]","aria-hidden":"true",children:e.jsx("span",{className:"text-5xl",children:"ğŸš€"})}),e.jsx("h2",{className:"text-3xl font-black text-[#1a1a1a] mb-3",children:"Build & Deploy Puter Apps"}),e.jsx("p",{className:"text-[#666] mb-8 max-w-md mx-auto",children:"Describe your app â†’ AI builds it â†’ Deploy as a real Puter app with live URL"}),e.jsx("button",{onClick:at,disabled:!u,className:s(Y,"rounded-full px-10 py-4 font-black text-lg disabled:opacity-50"),children:"Get Started Free"})]}),e.jsx("div",{className:"text-center py-4",children:e.jsxs("div",{className:"inline-flex items-center gap-2 text-[#888] text-sm",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[#dc2626]"}),"Powered by ",e.jsx("a",{href:"https://puter.com",target:"_blank",rel:"noopener noreferrer",className:"hover:underline text-[#0010d9]",children:"Puter.com"})," || Version 1.5.0 || Created by ",e.jsx("a",{href:"https://jayreddin.github.io",target:"_blank",rel:"noopener noreferrer",className:"hover:underline text-[#0010d9]",children:"Jayreddin"}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-[#1a1a1a]"})]})})]})}const Ct=document.getElementById("container");Ct&&Zt.createRoot(Ct).render(e.jsx(xs,{}));
